!function(e,t,n){function a(t,n){this.element=e(t),this.settings=e.extend({},h,n),this.init()}function i(){u.addClass(b.scroll)}function o(){u.removeClass(b.scroll)}function l(){var e="bzm"+(new Date).getTime();return e}function d(e,n){function a(){var t=(new Date).getTime(),l=t-i;l>=n?e.call():o.value=s(a)}if(!(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame&&t.mozCancelRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame))return t.setTimeout(e,n);var i=(new Date).getTime(),o={};return o.value=s(a),o}function r(){var e=n.body||n.documentElement,t=e.style,a="transition";if(a in t)return!0;var i=["Moz","webkit","Webkit","Khtml","O","ms"];a=a.charAt(0).toUpperCase()+a.substr(1);for(var o=0;o<i.length;o++)if([i[o]+a]in t)return!0;return!1}var s=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),c="bazeModal",u=e("html, body"),m=r()?600:100,b={show:"bzm--show",scroll:"bzm-disable-scroll",closeBtn:"data-close-modal",header:"bzm-header",title:"bzm-title",body:"bzm-body",footer:"bzm-footer",dialog:"bzm-dialog",overlay:"bzm",btnX:"bzm-header-close",btn:"bzm-btn",oldie:"bzm--oldie",oldieS:"bzm--oldie-show"},h={closeOnOverlayClick:!0,onOpen:null,onClose:null};a.prototype.init=function(){this.setupModal(),this.addClickHandler(),this.destroy()},a.prototype.setupModal=function(){var t=this.element.attr("data-target"),a=e(t),i=e(n.body),o=l(),d=a.attr("id"),s=a.attr("data-title"),c=a.html(),u=e(n.createElement("button")),m=e(n.createElement("h3")),h=e(n.createElement("div")),f=e(n.createElement("div")),p=e(n.createElement("button")),v=e(n.createElement("div")),y=e(n.createElement("div")),C=e(n.createElement("div"));a.removeAttr("id").attr("aria-hidden","true"),u.addClass(b.btnX).attr("data-close-modal","").text("Close"),m.addClass(b.title).attr("id",o).text(s),h.addClass(b.header).append(m).append(u),f.addClass(b.body).html(c),p.addClass(b.btn).attr("data-close-modal","").text("Close"),v.addClass(b.footer).append(p),y.addClass(b.dialog).attr({role:"dialog","aria-labelledby":o}).append(h).append(f).append(v),C.attr({id:d,"aria-hidden":"true",tabindex:"-1"}).addClass(b.overlay).append(y),r()||C.addClass(b.oldie),i.append(C)},a.prototype.addClickHandler=function(){var t=this.element,n=this.settings.onOpen,a=this.settings.onClose,l=this.settings.closeOnOverlayClick,s=function(){var s,c,u=this.getAttribute("data-target"),h=e(u),f=h.find("["+b.closeBtn+"]");h.length&&(s=function(){h.addClass(r()?b.show:b.oldieS),h.attr({"aria-hidden":"false",tabindex:"0"}),i(),n&&"function"==typeof n&&d(n,m),d(function(){f.eq(0).focus()},m)},c=function(){h.removeClass(r()?b.show:b.oldieS),h.attr({"aria-hidden":"true",tabindex:"-1"}),o(),t.focus(),a&&"function"==typeof a&&d(a,m)},s(),f.unbind("click").bind("click",c),l&&h.unbind("click").bind("click",function(t){var n=e(t.target);n.hasClass(b.overlay)&&c()}))};this.element.unbind("click",s).bind("click",s)},a.prototype.destroy=function(){var e=this.element;e.on("bazemodal.destroy",function(){e.unbind("click")})},function(){var a=e(n),i=(this.settings,function(n){var a,i=t.event?n.which:n.keyCode;if(a=e(r()?"."+b.show:"."+b.oldieS),27===i&&a.length){var o=a.find("."+b.btnX);o.trigger("click")}});a.unbind("keyup",i).bind("keyup",i)}(),e.fn[c]=function(t){return this.each(function(){e.data(this,"plugin_"+c)||e.data(this,"plugin_"+c,new a(this,t))})}}(jQuery,window,document);