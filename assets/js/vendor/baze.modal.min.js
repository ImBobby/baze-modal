window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),function(e,t,n){function i(t,n){this.element=e(t),this.settings=e.extend({},b,n),this.init()}function a(){m.addClass(c.scroll)}function o(){m.removeClass(c.scroll)}function d(){var e="bzm"+(new Date).getTime();return e}function r(e,n){function i(){var t=(new Date).getTime(),d=t-a;d>=n?e.call():o.value=requestAnimFrame(i)}if(!(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame&&t.mozCancelRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame))return t.setTimeout(e,n);var a=(new Date).getTime(),o={};return o.value=requestAnimFrame(i),o}function l(){var e=n.body||n.documentElement,t=e.style,i="transition";if(i in t)return!0;var a=["Moz","webkit","Webkit","Khtml","O","ms"];i=i.charAt(0).toUpperCase()+i.substr(1);for(var o=0;o<a.length;o++)if([a[o]+i]in t)return!0;return!1}var s="bazeModal",m=e("html, body"),u=l()?600:100,c={show:"bzm--show",scroll:"bzm-disable-scroll",closeBtn:"data-close-modal",header:"bzm-header",title:"bzm-title",body:"bzm-body",footer:"bzm-footer",dialog:"bzm-dialog",overlay:"bzm",btnX:"bzm-header-close",btn:"bzm-btn",oldie:"bzm--oldie",oldieS:"bzm--oldie-show"},b={onOpen:null,onClose:null};i.prototype.init=function(){this.setupModal(),this.addClickHandler(),this.destroy()},i.prototype.setupModal=function(){var t=this.element.attr("data-target"),i=e(t),a=e(n.body),o=d(),r=i.attr("id"),s=i.attr("data-title"),m=i.html(),u=e(n.createElement("button")),b=e(n.createElement("h3")),h=e(n.createElement("div")),f=e(n.createElement("div")),p=e(n.createElement("button")),w=e(n.createElement("div")),v=e(n.createElement("div")),y=e(n.createElement("div"));i.removeAttr("id").attr("aria-hidden","true"),u.addClass(c.btnX).attr("data-close-modal","").text("Close"),b.addClass(c.title).attr("id",o).text(s),h.addClass(c.header).append(b).append(u),f.addClass(c.body).html(m),p.addClass(c.btn).attr("data-close-modal","").text("Close"),w.addClass(c.footer).append(p),v.addClass(c.dialog).attr({role:"dialog","aria-labelledby":o}).append(h).append(f).append(w),y.attr({id:r,"aria-hidden":"true",tabindex:"-1"}).addClass(c.overlay).append(v),l()||y.addClass(c.oldie),a.append(y)},i.prototype.addClickHandler=function(){var t=this.element,n=this.settings.onOpen,i=this.settings.onClose,d=function(){var d,s,m=this.getAttribute("data-target"),b=e(m),h=b.find("["+c.closeBtn+"]");b.length&&(d=function(){b.addClass(l()?c.show:c.oldieS),b.attr({"aria-hidden":"false",tabindex:"0"}),a(),n&&"function"==typeof n&&r(n,u),r(function(){h.eq(0).focus()},u)},s=function(){b.removeClass(l()?c.show:c.oldieS),b.attr({"aria-hidden":"true",tabindex:"-1"}),o(),t.focus(),i&&"function"==typeof i&&r(i,u)},d(),h.unbind("click").bind("click",s))};this.element.unbind("click",d).bind("click",d)},i.prototype.destroy=function(){var e=this.element;e.on("bazemodal.destroy",function(){e.unbind("click")})},function(){var i=e(n),a=(this.settings,function(n){var i,a=t.event?n.which:n.keyCode;if(i=e(l()?"."+c.show:"."+c.oldieS),27===a&&i.length){var o=i.find("."+c.btnX);o.trigger("click")}});i.unbind("keyup",a).bind("keyup",a)}(),e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new i(this,t))})}}(jQuery,window,document);